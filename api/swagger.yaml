basePath: /api/v1
definitions:
  dto.AddressDTO:
    properties:
      country:
        type: string
      municipality:
        type: string
      neighborhood:
        type: string
      province:
        type: string
      zipCode:
        type: string
    type: object
  dto.Alert:
    properties:
      latitude:
        type: number
      longitude:
        type: number
      message:
        type: string
      radius:
        type: number
      risk_topic_id:
        type: string
      risk_type_id:
        type: string
      severity:
        type: string
      user_id:
        type: string
    type: object
  dto.LoginInput:
    properties:
      email:
        type: string
      password:
        type: string
    type: object
  dto.RegisterUserInput:
    properties:
      email:
        type: string
      name:
        type: string
      password:
        type: string
      phone:
        type: string
    type: object
  dto.RegisterUserOutput:
    properties:
      id:
        type: string
    type: object
  dto.ReportCreate:
    properties:
      address:
        type: string
      description:
        type: string
      image_url:
        type: string
      latitude:
        type: number
      longitude:
        type: number
      municipality:
        type: string
      neighborhood:
        type: string
      province:
        type: string
      risk_topic_id:
        type: string
      risk_type_id:
        type: string
      user_id:
        type: string
    type: object
  dto.ReportDTO:
    properties:
      address:
        type: string
      created_at:
        type: string
      description:
        type: string
      id:
        type: string
      image_url:
        type: string
      latitude:
        type: number
      longitude:
        type: number
      municipality:
        type: string
      neighborhood:
        type: string
      province:
        type: string
      resolved_at:
        type: string
      reviewed_by:
        type: string
      risk_topic_id:
        type: string
      risk_type_id:
        type: string
      status:
        type: string
      updated_at:
        type: string
      user_id:
        type: string
    type: object
  dto.ResolveReportRequest:
    properties:
      moderator_id:
        type: string
    required:
    - moderator_id
    type: object
  dto.UserProfileOutput:
    properties:
      address:
        $ref: '#/definitions/dto.AddressDTO'
      email:
        type: string
      id:
        type: string
      name:
        type: string
      nif:
        type: string
      phone:
        type: string
      role_name:
        items:
          type: string
        type: array
    type: object
  dto.UserProfileResponse:
    properties:
      active_role:
        type: string
      email:
        type: string
      id:
        type: string
      name:
        type: string
      role_name:
        items:
          type: string
        type: array
    type: object
  dto.UserSignInDTO:
    properties:
      access_token:
        type: string
      expires_in:
        type: integer
      refresh_token:
        type: string
      token_type:
        type: string
      user:
        $ref: '#/definitions/dto.UserProfileResponse'
    type: object
  dto.VerifyReportRequest:
    properties:
      moderator_id:
        type: string
    required:
    - moderator_id
    type: object
  util.ErrorResponse:
    properties:
      error:
        properties:
          code:
            type: integer
          message: {}
        type: object
      success:
        type: boolean
    type: object
info:
  contact:
    email: support@riskplace.ao
    name: API Support
    url: http://www.riskplace.ao
  description: |-
    This is the API documentation for the Risk Place Angola application.

    ## Environments
    - **Development**: https://risk-place-angola-904a.onrender.com
    - **Local**: http://localhost:8000

    ## WebSocket Integration Guide
    For detailed instructions on integrating WebSocket in mobile applications, please refer to our [WebSocket Notification Guide](https://github.com/risk-place-angola/backend-risk-place/blob/develop/docs/MOBILE_WEBSOCKET_INTEGRATION.md)
  title: Risk Place Angola API
  version: 1.0.0
paths:
  /alerts:
    post:
      consumes:
      - application/json
      description: Create a new alert.
      parameters:
      - description: Alert
        in: body
        name: alert
        required: true
        schema:
          $ref: '#/definitions/dto.Alert'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/dto.Alert'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/util.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/util.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create a new alert.
      tags:
      - alerts
  /auth/confirm:
    post:
      consumes:
      - application/json
      description: Confirm user signup using the verification code
      parameters:
      - description: Signup confirmation data
        in: body
        name: confirmation
        required: true
        schema:
          properties:
            code:
              type: string
            email:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "204":
          description: signup confirmed successfully
          schema:
            type: string
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/util.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/util.ErrorResponse'
      summary: Confirm user signup
      tags:
      - users
  /auth/login:
    post:
      consumes:
      - application/json
      description: Login a user
      parameters:
      - description: User login credentials
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/dto.LoginInput'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.UserSignInDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/util.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/util.ErrorResponse'
      summary: Login a user
      tags:
      - users
  /auth/password/forgot:
    post:
      consumes:
      - application/json
      description: Send a password reset code to the user's email
      parameters:
      - description: User email
        in: body
        name: email
        required: true
        schema:
          properties:
            email:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: password reset code sent
          schema:
            type: string
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/util.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/util.ErrorResponse'
      summary: Initiate password reset
      tags:
      - users
  /auth/password/reset:
    post:
      consumes:
      - application/json
      description: Reset user password using the reset code
      parameters:
      - description: Password reset data
        in: body
        name: reset
        required: true
        schema:
          properties:
            email:
              type: string
            password:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: password reset successfully
          schema:
            type: string
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/util.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/util.ErrorResponse'
      summary: Reset user password
      tags:
      - users
  /reports:
    post:
      consumes:
      - application/json
      description: Create a new report
      parameters:
      - description: Report to create
        in: body
        name: report
        required: true
        schema:
          $ref: '#/definitions/dto.ReportCreate'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/dto.ReportDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/util.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/util.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create a new report
      tags:
      - reports
  /reports/{id}/resolve:
    post:
      consumes:
      - application/json
      description: Resolve a report by its ID
      parameters:
      - description: Report ID
        in: path
        name: id
        required: true
        type: string
      - description: Resolution data
        in: body
        name: resolve
        required: true
        schema:
          $ref: '#/definitions/dto.ResolveReportRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/util.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/util.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/util.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Resolve a report
      tags:
      - reports
  /reports/{id}/verify:
    post:
      consumes:
      - application/json
      description: Verify a report by its ID
      parameters:
      - description: Report ID
        in: path
        name: id
        required: true
        type: string
      - description: Verification data
        in: body
        name: verify
        required: true
        schema:
          $ref: '#/definitions/dto.VerifyReportRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/util.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/util.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/util.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Verify a report
      tags:
      - reports
  /reports/nearby:
    get:
      consumes:
      - application/json
      description: List reports near the specified location
      parameters:
      - description: Latitude
        in: query
        name: lat
        required: true
        type: string
      - description: Longitude
        in: query
        name: lon
        required: true
        type: string
      - description: Radius in meters
        in: query
        name: radius
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/dto.ReportDTO'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/util.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List nearby reports
      tags:
      - reports
  /users/me:
    get:
      consumes:
      - application/json
      description: Get information about the currently authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.UserProfileOutput'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/util.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/util.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get current user info
      tags:
      - users
  /users/signup:
    post:
      consumes:
      - application/json
      description: Register a new user
      parameters:
      - description: User registration data
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/dto.RegisterUserInput'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/dto.RegisterUserOutput'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/util.ErrorResponse'
      summary: Register a new user
      tags:
      - users
  /ws/alerts:
    get:
      description: Upgrade HTTP connection to WebSocket for real-time alerts
      responses:
        "101":
          description: Switching Protocols
          schema:
            type: string
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/util.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Handle WebSocket connections for alerts
      tags:
      - websocket
securityDefinitions:
  BearerAuth:
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
